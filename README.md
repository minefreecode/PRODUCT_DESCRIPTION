# 1-й вопрос

есть бизнес структура. Она состоит из товаров которые продаются в разных ГЕО. При этом в каждом ГЕО есть своя валюта и своя цена (учитывая доставку). К каждому ГЕО, на каждый товар приходят лиды, которых надо фиксировать. При этом есть коэффициент который динамически повышает или понижает цену в зависимости от количества лидов пришедших на ГЕО и товар. По принципу - больше лидов - меньше цена. Рейтинг обновляется раз в 10 минут.
Отразите схему организации мест хранения данных и взаимодействия с ними в виде запросов.


Думаю что нужно выбрать реляционную БД для хранения Лидов. Должна быть таблица ГЕО, на которую ссылаются Лиды. Должна быть таблица коэффициентов для хранения истории.

Реляционная БД:
GEO (PK id, name, x , y, price, currency)
Lids (PK id, FK geo_id,  name, ip, attributes…)
Koeff(PK id,  datetime datetime) – история ведется по дате-времени

Product(id, name, price)
Order(id, product_id, datetime)

Цена товара бывает с доставкой, бывает без доставки. 
total_price = product_price + delivery_price

Формирование цен с доставкой это очень сложный процесс и может различаться от ГЕО, итоговой цены и количества товаров который куплен.

	Как это всё работает? Зашёл Лид на сайт и по нему из запроса браузера узнаётся IP-адрес, имя человека из регистраций. Если пользователь пользуется ботом в телеграмм он сообщает своё имя, неопционально номер телефона и имя пользователя в Telegram. Потом сайт делает запросы на внешние источники – сервисы для уточнения информации о пользователе. Это могут быть специальные сайты, уточняющие информацию о пользователе, Facebook. По ним мы узнаём предпочтения пользователя и что лучше потом ему рекламировать с других сайтов где выставляется реклама компании.

	Будет CRON, который каждые 10 минут проверяет информацию о количестве пользователей и составляет новые рейтинги.

	Страницы которые выдаются Лидам лучше кешировать, чтобы делать меньше запросов к БД. Кешируются информация о товаре, цене товара, характеристики товара. Кеширование можно настроить так чтобы оно происходило каждые 5 минут. Кеширование происходит из реляционной БД в кеш.



2. 

 
